---
title: WebSocketProvider
icon: square-c
iconType: solid
---

A JSON-RPC provider which is backed by a WebSocket.

WebSockets are often preferred because they retain a live connection to a server, which permits more instant access
to events.

However, this incurs higher server infrastructure costs, so additional resources may be required to host your own
WebSocket nodes and many third-party services charge additional fees for WebSocket endpoints.

## Extends

- [`SocketProvider`](/sdk/content/classes/SocketProvider)

## Constructors

### new WebSocketProvider()

```ts
new WebSocketProvider(
   url, 
   network?, 
   options?): WebSocketProvider
```

Create a new WebSocketProvider.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `url` | `string` \| `string`[] \| [`WebSocketLike`](/sdk/content/interfaces/WebSocketLike) \| [`WebSocketCreator`](/sdk/content/type-aliases/WebSocketCreator) | The URL(s) or WebSocket object or creator. |
| `network`? | [`Networkish`](/sdk/content/type-aliases/Networkish) | The network to connect to. |
| `options`? | [`JsonRpcApiProviderOptions`](/sdk/content/type-aliases/JsonRpcApiProviderOptions) | The options for the JSON-RPC API provider. |

#### Returns

[`WebSocketProvider`](/sdk/content/classes/WebSocketProvider)

#### Overrides

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`constructor`](/sdk/content/classes/SocketProvider#constructors)

#### Source

[providers/provider-websocket.ts:76](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-websocket.ts#L76)

## Properties

| Property | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `readyMap` | `Map`\<[`Shard`](/sdk/content/enumerations/Shard), `boolean`\> | `...` | A map to track the readiness of each shard. |

## Accessors

### connect

```ts
get connect(): FetchRequest[]
```

Get the list of connected FetchRequests.

#### Returns

[`FetchRequest`](/sdk/content/classes/FetchRequest)[]

The list of connected FetchRequests.

#### Source

[providers/abstract-provider.ts:708](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L708)

***

### destroyed

```ts
get destroyed(): boolean
```

If this provider has been destroyed using the [**destroy**](/sdk/content/classes/AbstractProvider#destroy) method.

Once destroyed, all resources are reclaimed, internal event loops and timers are cleaned up and no further
requests may be sent to the provider.

#### Returns

`boolean`

#### Source

[providers/abstract-provider.ts:1875](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L1875)

***

### paused

```ts
get paused(): boolean
```

Whether the provider is currently paused.

A paused provider will not emit any events, and generally should not make any requests to the network, but that
is up to sub-classes to manage.

Setting `paused = true` is identical to calling `.pause(false)`, which will buffer any events that occur while
paused until the provider is unpaused.

#### Returns

`boolean`

Whether the provider is paused.

#### Source

[providers/abstract-provider.ts:1907](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L1907)

***

### pollingInterval

```ts
get pollingInterval(): number
```

Get the polling interval.

#### Returns

`number`

The polling interval.

#### Source

[providers/abstract-provider.ts:817](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L817)

***

### provider

```ts
get provider(): this
```

Returns `this`, to allow an **AbstractProvider** to implement the [Contract Runner](../classes/ContractRunner)
interface.

#### Returns

`this`

The provider instance.

#### Source

[providers/abstract-provider.ts:827](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L827)

***

### ready

```ts
get ready(): boolean
```

Returns true only if the JsonRpcApiProvider._start | **_start** has been called.

#### Returns

`boolean`

True if the provider is ready.

#### Source

[providers/provider-jsonrpc.ts:1048](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-jsonrpc.ts#L1048)

***

### websocket

```ts
get websocket(): WebSocketLike[]
```

Get the array of WebSocketLike objects.

#### Throws

If the websocket is closed.

#### Returns

[`WebSocketLike`](/sdk/content/interfaces/WebSocketLike)[]

The array of WebSocketLike objects.

#### Source

[providers/provider-websocket.ts:62](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-websocket.ts#L62)

## Methods

### \_clearTimeout()

```ts
_clearTimeout(timerId): void
```

Clear a timer created using the AbstractProvider._setTimeout | **_setTimeout** method.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `timerId` | `number` | The ID of the timer to clear. |

#### Returns

`void`

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`_clearTimeout`](/sdk/content/classes/SocketProvider#_cleartimeout)

#### Source

[providers/abstract-provider.ts:1603](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L1603)

***

### destroy()

```ts
destroy(): Promise<void>
```

Destroy the WebSocket connections and clean up resources.

#### Returns

`Promise`\<`void`\>

A promise that resolves when the WebSocket connections are closed.

#### Overrides

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`destroy`](/sdk/content/classes/SocketProvider#destroy)

#### Source

[providers/provider-websocket.ts:215](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-websocket.ts#L215)

***

### getLatestQiRate()

```ts
getLatestQiRate(zone, amt?): Promise<bigint>
```

Get the latest Qi rate for a zone.

#### Parameters

| Parameter | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `zone` | [`Zone`](/sdk/content/enumerations/Zone) | `undefined` | The zone to get the rate for. |
| `amt`? | `number` | `1` | The amount to get the rate for. Default is `1` |

#### Returns

`Promise`\<`bigint`\>

A promise that resolves to the latest Qi rate.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`getLatestQiRate`](/sdk/content/classes/SocketProvider#getlatestqirate)

#### Source

[providers/abstract-provider.ts:785](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L785)

***

### getLatestQuaiRate()

```ts
getLatestQuaiRate(zone, amt?): Promise<bigint>
```

Get the latest Quai rate for a zone.

#### Parameters

| Parameter | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `zone` | [`Zone`](/sdk/content/enumerations/Zone) | `undefined` | The zone to get the rate for. |
| `amt`? | `number` | `1` | The amount to get the rate for. Default is `1` |

#### Returns

`Promise`\<`bigint`\>

A promise that resolves to the latest Quai rate.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`getLatestQuaiRate`](/sdk/content/classes/SocketProvider#getlatestquairate)

#### Source

[providers/abstract-provider.ts:740](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L740)

***

### getProtocolExpansionNumber()

```ts
getProtocolExpansionNumber(): Promise<number>
```

Get the protocol expansion number.

#### Returns

`Promise`\<`number`\>

A promise that resolves to the protocol expansion number.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`getProtocolExpansionNumber`](/sdk/content/classes/SocketProvider#getprotocolexpansionnumber)

#### Source

[providers/abstract-provider.ts:772](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L772)

***

### getQiRateAtBlock()

```ts
getQiRateAtBlock(
   zone, 
   blockTag, 
amt?): Promise<bigint>
```

Get the Qi rate at a specific block.

#### Parameters

| Parameter | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `zone` | [`Zone`](/sdk/content/enumerations/Zone) | `undefined` | The zone to get the rate for. |
| `blockTag` | [`BlockTag`](/sdk/content/type-aliases/BlockTag) | `undefined` | The block tag to get the rate at. |
| `amt`? | `number` | `1` | The amount to get the rate for. Default is `1` |

#### Returns

`Promise`\<`bigint`\>

A promise that resolves to the Qi rate at the specified block.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`getQiRateAtBlock`](/sdk/content/classes/SocketProvider#getqirateatblock)

#### Source

[providers/abstract-provider.ts:798](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L798)

***

### getQuaiRateAtBlock()

```ts
getQuaiRateAtBlock(
   zone, 
   blockTag, 
amt?): Promise<bigint>
```

Get the Quai rate at a specific block.

#### Parameters

| Parameter | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `zone` | [`Zone`](/sdk/content/enumerations/Zone) | `undefined` | The zone to get the rate for. |
| `blockTag` | [`BlockTag`](/sdk/content/type-aliases/BlockTag) | `undefined` | The block tag to get the rate at. |
| `amt`? | `number` | `1` | The amount to get the rate for. Default is `1` |

#### Returns

`Promise`\<`bigint`\>

A promise that resolves to the Quai rate at the specified block.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`getQuaiRateAtBlock`](/sdk/content/classes/SocketProvider#getquairateatblock)

#### Source

[providers/abstract-provider.ts:753](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L753)

***

### getSigner()

```ts
getSigner(address?): Promise<JsonRpcSigner>
```

Returns a JsonRpcSigner for the given address.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `address`? | `string` \| `number` | The address or index of the account. |

#### Returns

`Promise`\<[`JsonRpcSigner`](/sdk/content/classes/JsonRpcSigner)\>

A promise that resolves to the JsonRpcSigner.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`getSigner`](/sdk/content/classes/SocketProvider#getsigner)

#### Throws

If the account is invalid.

#### Source

[providers/provider-jsonrpc.ts:1402](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-jsonrpc.ts#L1402)

***

### listAccounts()

```ts
listAccounts(): Promise<JsonRpcSigner[]>
```

Returns a list of JsonRpcSigners for all accounts.

#### Returns

`Promise`\<[`JsonRpcSigner`](/sdk/content/classes/JsonRpcSigner)[]\>

A promise that resolves to an array of JsonRpcSigners.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`listAccounts`](/sdk/content/classes/SocketProvider#listaccounts)

#### Source

[providers/provider-jsonrpc.ts:1439](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-jsonrpc.ts#L1439)

***

### pause()

```ts
pause(dropWhilePaused?): void
```

Pause the provider. If `dropWhilePaused`, any events that occur while paused are dropped, otherwise all events
will be emitted once the provider is unpaused.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `dropWhilePaused`? | `boolean` | Whether to drop events while paused. |

#### Returns

`void`

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`pause`](/sdk/content/classes/SocketProvider#pause)

#### Source

[providers/abstract-provider.ts:1928](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L1928)

***

### resume()

```ts
resume(): void
```

Resume the provider.

#### Returns

`void`

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`resume`](/sdk/content/classes/SocketProvider#resume)

#### Source

[providers/abstract-provider.ts:1957](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L1957)

***

### send()

```ts
send(
   method, 
   params, 
shard?): Promise<any>
```

Requests the `method` with `params` via the JSON-RPC protocol over the underlying channel. This can be used to
call methods on the backend that do not have a high-level API within the Provider API.

This method queues requests according to the batch constraints in the options, assigns the request a unique ID.

**Do NOT override** this method in sub-classes; instead override JsonRpcApiProvider._send | **_send** or
force the options values in the call to the constructor to modify this method's behavior.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `method` | `string` | The method to call. |
| `params` | `any`[] \| `Record`\<`string`, `any`\> | The parameters to pass to the method. |
| `shard`? | [`Shard`](/sdk/content/enumerations/Shard) | The shard to send the request to. |

#### Returns

`Promise`\<`any`\>

A promise that resolves to the result of the method call.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`send`](/sdk/content/classes/SocketProvider#send)

#### Source

[providers/provider-jsonrpc.ts:1370](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-jsonrpc.ts#L1370)

***

### shardFromHash()

```ts
shardFromHash(hash): Shard
```

Get the shard from a hash.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `hash` | `string` | The hash to get the shard from. |

#### Returns

[`Shard`](/sdk/content/enumerations/Shard)

The shard.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`shardFromHash`](/sdk/content/classes/SocketProvider#shardfromhash)

#### Source

[providers/abstract-provider.ts:729](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L729)

***

### waitShardReady()

```ts
waitShardReady(shard): Promise<void>
```

Wait until the shard is ready. Max wait time is ~8 seconds.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `shard` | [`Shard`](/sdk/content/enumerations/Shard) | The shard identifier. |

#### Returns

`Promise`\<`void`\>

A promise that resolves when the shard is ready.

#### Throws

If the shard is not ready within the timeout period.

#### Source

[providers/provider-websocket.ts:117](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/provider-websocket.ts#L117)

***

### zoneFromAddress()

```ts
zoneFromAddress(_address): Promise<Zone>
```

Get the zone from an address.

#### Parameters

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `_address` | [`AddressLike`](/sdk/content/type-aliases/AddressLike) | The address to get the zone from. |

#### Returns

`Promise`\<[`Zone`](/sdk/content/enumerations/Zone)\>

A promise that resolves to the zone.

#### Inherited from

[`SocketProvider`](/sdk/content/classes/SocketProvider).[`zoneFromAddress`](/sdk/content/classes/SocketProvider#zonefromaddress)

#### Source

[providers/abstract-provider.ts:718](https://github.com/dominant-strategies/quais-6.js/blob/e281b3ca939b91260332b67ef4ba6e8b0a3d4134/src/providers/abstract-provider.ts#L718)
